[from-internal]
; Legacy single IVR extension (backward compatible)
exten => 6000,1,NoOp(Balance IVR via ARI)
 same => n,Answer()
 same => n,Stasis(balance-ivr)
 same => n,Hangup()

; Dynamic IVR extensions (2000-2999)
; Each extension routes to the IVR engine with the extension number
exten => _2XXX,1,NoOp(Dynamic IVR - Extension ${EXTEN})
 same => n,Set(IVR_EXTENSION=${EXTEN})
 same => n,Answer()
 same => n,Stasis(ivr-engine,${EXTEN})
 same => n,Hangup()

; User extensions (1000-1999) for softphones like Zoiper
exten => _1XXX,1,NoOp(Calling user extension ${EXTEN})
 same => n,Dial(PJSIP/${EXTEN},60,tT)
 same => n,Hangup()

; Transfer context for IVR transfers
[transfer]
exten => _X.,1,NoOp(Transfer to ${EXTEN})
 same => n,Dial(PJSIP/${EXTEN},30)
 same => n,Hangup()

; Outbound campaign context - when the callee answers, run the IVR
[outbound-ivr]
exten => s,1,NoOp(Outbound IVR call - IVR ID: ${IVR_ID})
 same => n,Answer()
 same => n,Wait(1)
 same => n,Stasis(ivr-engine,${IVR_EXTENSION})
 same => n,Hangup()
; Context for calls coming from Avaya IP Office
[from-ipoffice]
; Route IVR extensions (2000-2999) to IVR engine
exten => _2XXX,1,NoOp(IP Office -> IVR Extension ${EXTEN})
 same => n,Set(IVR_EXTENSION=${EXTEN})
 same => n,Answer()
 same => n,Stasis(ivr-engine,${EXTEN})
 same => n,Hangup()

; Route any extension to IVR engine (catch-all)
exten => _X.,1,NoOp(IP Office -> Extension ${EXTEN})
 same => n,Answer()
 same => n,Stasis(ivr-engine,${EXTEN})
 same => n,Hangup()